local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- X√≥a UI c≈© n·∫øu c√≥
if playerGui:FindFirstChild("AntiBanScreen") then
	playerGui.AntiBanScreen:Destroy()
end

-- T·∫°o ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AntiBanScreen"
screenGui.IgnoreGuiInset = true
screenGui.DisplayOrder = 999999 -- ƒê·∫£m b·∫£o n·∫±m tr√™n c√πng
screenGui.Parent = playerGui

-- T·∫°o Background (c√≥ th·ªÉ thay ƒë·ªïi h√¨nh ·∫£nh t·∫°i ƒë√¢y)
local Background = Instance.new("ImageLabel")
Background.Name = "Background"
Background.Parent = screenGui
Background.Size = UDim2.new(1, 0, 1, 0)
Background.Position = UDim2.new(0, 0, 0, 0)
Background.BackgroundTransparency = 1
Background.Image = "rbxassetid://15136859462" -- Thay ƒë·ªïi id n√†y sang ·∫£nh b·∫°n mu·ªën
Background.ImageTransparency = 0.1
Background.ScaleType = Enum.ScaleType.Crop

-- Overlay nh·∫π ƒë·ªÉ l√†m t·ªëi n·ªÅn n·∫øu c·∫ßn
local Overlay = Instance.new("Frame")
Overlay.BackgroundColor3 = Color3.fromRGB(10,10,10)
Overlay.BackgroundTransparency = 0.4
Overlay.Size = UDim2.new(1,0,1,0)
Overlay.Parent = Background

-- D√≤ng ch·ªØ ch√≠nh (phong c√°ch tr·∫ª trung, neon, l·∫Øc l∆∞)
local Title = Instance.new("TextLabel")
Title.Parent = Background
Title.AnchorPoint = Vector2.new(0.5, 1)
Title.Position = UDim2.new(0.5, 0, 0.85, 0)
Title.Size = UDim2.new(0.92, 0, 0.15, 0)
Title.BackgroundTransparency = 1
Title.Text = "üî• Waiting For The AntiBan Enable üî•"
Title.TextColor3 = Color3.fromRGB(0,255,255)
Title.TextStrokeTransparency = 0.2
Title.TextStrokeColor3 = Color3.fromRGB(255,0,255)
Title.Font = Enum.Font.FredokaOne
Title.TextScaled = true
Title.TextWrapped = true
Title.ZIndex = 10

-- Thanh ti·∫øn tr√¨nh n·ªÅn (d·ªÖ nh√¨n, bo g√≥c, t√¥ng s√°ng)
local ProgressBarBg = Instance.new("Frame")
ProgressBarBg.Parent = Background
ProgressBarBg.AnchorPoint = Vector2.new(0.5, 1)
ProgressBarBg.Position = UDim2.new(0.5, 0, 0.96, 0)
ProgressBarBg.Size = UDim2.new(0.7, 0, 0.06, 0)
ProgressBarBg.BackgroundColor3 = Color3.fromRGB(230, 230, 230)
ProgressBarBg.BackgroundTransparency = 0
ProgressBarBg.BorderSizePixel = 0
ProgressBarBg.ClipsDescendants = true
ProgressBarBg.ZIndex = 2

local UICorner = Instance.new("UICorner", ProgressBarBg)
UICorner.CornerRadius = UDim.new(0.5,0)

-- Vi·ªÅn m·ªèng nh·∫π nh√†ng
local Stroke = Instance.new("UIStroke", ProgressBarBg)
Stroke.Thickness = 2
Stroke.Color = Color3.fromRGB(160, 160, 160)
Stroke.Transparency = 0.4

-- Thanh ti·∫øn tr√¨nh ch·∫°y (m√†u xanh s√°ng)
local ProgressBar = Instance.new("Frame")
ProgressBar.Parent = ProgressBarBg
ProgressBar.Size = UDim2.new(0, 0, 1, 0)
ProgressBar.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
ProgressBar.BackgroundTransparency = 0
ProgressBar.BorderSizePixel = 0
ProgressBar.ZIndex = 3
local fillCorner = Instance.new("UICorner", ProgressBar)
fillCorner.CornerRadius = UDim.new(0.5,0)

-- ƒê√É B·ªé C·ª§C TRONG SU·ªêT/kh√¥ng c√≤n c·ª•c tr·∫Øng-trong su·ªët ·ªü ƒë·∫ßu thanh!

-- V·∫°ch tr·∫Øng ƒë·∫ßu thanh
local ProgressMarker = Instance.new("Frame")
ProgressMarker.Parent = ProgressBarBg
ProgressMarker.Size = UDim2.new(0, 8, 0.8, 0)
ProgressMarker.AnchorPoint = Vector2.new(0,0.5)
ProgressMarker.Position = UDim2.new(0, -3, 0.5, 0)
ProgressMarker.BackgroundColor3 = Color3.fromRGB(255,255,255)
ProgressMarker.BackgroundTransparency = 0
ProgressMarker.BorderSizePixel = 0
ProgressMarker.ZIndex = 6
local markerCorner = Instance.new("UICorner", ProgressMarker)
markerCorner.CornerRadius = UDim.new(0.5,0)

-- % s·ªë ch·∫°y ph√≠a ph·∫£i thanh, r√µ n√©t
local PercentLabel = Instance.new("TextLabel")
PercentLabel.Parent = ProgressBarBg
PercentLabel.AnchorPoint = Vector2.new(1, 0.5)
PercentLabel.Position = UDim2.new(1, -8, 0.5, 0)
PercentLabel.Size = UDim2.new(0.18, 0, 1.4, 0)
PercentLabel.BackgroundTransparency = 1
PercentLabel.Text = "1%"
PercentLabel.TextColor3 = Color3.fromRGB(0, 200, 255)
PercentLabel.TextStrokeTransparency = 0.5
PercentLabel.Font = Enum.Font.FredokaOne
PercentLabel.TextScaled = true
PercentLabel.ZIndex = 9

-- Animation cho Title (l·∫Øc l∆∞, ƒë·ªïi m√†u d·∫ßn)
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local duration = 30 -- gi√¢y
local percentStart = 1
local percentEnd = 100

local startTime = tick()
local finished = false

local hue = 0
local function updateTitleAnim(dt)
	hue = (hue + dt*0.18) % 1
	local color = Color3.fromHSV(hue, 0.85, 1)
	Title.TextColor3 = color
	Title.TextStrokeColor3 = Color3.fromHSV((hue+0.1)%1,0.5,1)
	-- L·∫Øc l∆∞
	local sway = math.sin(tick()*2.5)*5
	Title.Rotation = sway
end

local function updatePercentColor(percent)
	PercentLabel.TextColor3 = Color3.fromHSV(0.5 + percent/200, 0.7, 1)
end

-- H√†m ch·∫°y progress bar
local function updateProgress()
	local elapsed = tick() - startTime
	local alpha = math.clamp(elapsed / duration, 0, 1)
	local percent = math.floor(percentStart + (percentEnd - percentStart) * alpha + 0.5)
	ProgressBar.Size = UDim2.new(alpha, 0, 1, 0)
	ProgressMarker.Position = UDim2.new(alpha, -4, 0.5, 0)
	PercentLabel.Text = percent.."%"
	updatePercentColor(percent)
	if alpha >= 1 then
		finished = true
	end
end

-- Animation nh·∫•p nh√°y nh·∫π cho ProgressMarker
local function updateMarkerAnim()
	ProgressMarker.BackgroundTransparency = 0.1 + math.abs(math.sin(tick()*5))*0.15
end

-- Main render loop
local lastTick = tick()
local connection
connection = RunService.RenderStepped:Connect(function()
	if not finished then
		local now = tick()
		local dt = now - lastTick
		lastTick = now
		updateTitleAnim(dt)
		updateProgress()
		updateMarkerAnim()
	else
		connection:Disconnect()
		-- T√πy √Ω: ·∫®n ho·∫∑c x√≥a UI sau khi xong
		-- screenGui:Destroy()
	end
end)

-- (Tu·ª≥ ch·ªçn) Cho ph√©p ch·ªânh ·∫£nh n·ªÅn t·ª´ b√™n ngo√†i:
-- game.ReplicatedStorage.ChangeAntiBanBG.OnClientEvent:Connect(function(newId)
--     Background.Image = "rbxassetid://"..tostring(newId)
-- end)
