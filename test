local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Xóa UI cũ nếu có
if playerGui:FindFirstChild("AntiBanScreen") then
	playerGui.AntiBanScreen:Destroy()
end

-- Tạo ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AntiBanScreen"
screenGui.IgnoreGuiInset = true
screenGui.DisplayOrder = 999999 -- Đảm bảo nằm trên cùng
screenGui.Parent = playerGui

-- Tạo Background (có thể thay đổi hình ảnh tại đây)
local Background = Instance.new("ImageLabel")
Background.Name = "Background"
Background.Parent = screenGui
Background.Size = UDim2.new(1, 0, 1, 0)
Background.Position = UDim2.new(0, 0, 0, 0)
Background.BackgroundTransparency = 1
Background.Image = "rbxassetid://15136859462" -- Thay đổi id này sang ảnh bạn muốn
Background.ImageTransparency = 0.1
Background.ScaleType = Enum.ScaleType.Crop

-- Overlay nhẹ để làm tối nền nếu cần
local Overlay = Instance.new("Frame")
Overlay.BackgroundColor3 = Color3.fromRGB(10,10,10)
Overlay.BackgroundTransparency = 0.4
Overlay.Size = UDim2.new(1,0,1,0)
Overlay.Parent = Background

-- Dòng chữ chính
local Title = Instance.new("TextLabel")
Title.Parent = Background
Title.AnchorPoint = Vector2.new(0.5, 1)
Title.Position = UDim2.new(0.5, 0, 0.87, 0)
Title.Size = UDim2.new(0.9, 0, 0.12, 0)
Title.BackgroundTransparency = 1
Title.Text = "Waiting For The AntiBan Enable"
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.TextStrokeTransparency = 0.5
Title.TextStrokeColor3 = Color3.fromRGB(0,0,0)
Title.Font = Enum.Font.GothamBlack
Title.TextScaled = true

-- Thanh tiến trình nền (TO: chỉnh to hơn)
local ProgressBarBg = Instance.new("Frame")
ProgressBarBg.Parent = Background
ProgressBarBg.AnchorPoint = Vector2.new(0.5, 1)
ProgressBarBg.Position = UDim2.new(0.5, 0, 0.96, 0)
ProgressBarBg.Size = UDim2.new(0.8, 0, 0.07, 0) -- Tăng rộng lên 0.8 và cao lên 0.07 (mặc định là 0.7, 0.03)
ProgressBarBg.BackgroundColor3 = Color3.fromRGB(50,50,50)
ProgressBarBg.BackgroundTransparency = 0.4
ProgressBarBg.BorderSizePixel = 0
ProgressBarBg.ClipsDescendants = true
ProgressBarBg.ZIndex = 2

-- Thanh tiến trình chạy
local ProgressBar = Instance.new("Frame")
ProgressBar.Parent = ProgressBarBg
ProgressBar.Size = UDim2.new(0, 0, 1, 0)
ProgressBar.BackgroundColor3 = Color3.fromRGB(255,255,255)
ProgressBar.BackgroundTransparency = 0
ProgressBar.BorderSizePixel = 0
ProgressBar.ZIndex = 3

-- Vạch trắng chạy theo ở đầu thanh
local ProgressMarker = Instance.new("Frame")
ProgressMarker.Parent = ProgressBarBg
ProgressMarker.Size = UDim2.new(0, 3, 1, 0)
ProgressMarker.BackgroundColor3 = Color3.fromRGB(255,255,255)
ProgressMarker.BorderSizePixel = 0
ProgressMarker.ZIndex = 4

-- % số chạy phía phải thanh
local PercentLabel = Instance.new("TextLabel")
PercentLabel.Parent = ProgressBarBg
PercentLabel.AnchorPoint = Vector2.new(1, 0.5)
PercentLabel.Position = UDim2.new(1, 0, 0.5, 0)
PercentLabel.Size = UDim2.new(0.13, 0, 1.7, 0)
PercentLabel.BackgroundTransparency = 1
PercentLabel.Text = "1%"
PercentLabel.TextColor3 = Color3.fromRGB(255,255,255)
PercentLabel.TextStrokeTransparency = 0.6
PercentLabel.Font = Enum.Font.GothamBold
PercentLabel.TextScaled = true
PercentLabel.ZIndex = 5

-- Hàm chạy progress bar
local duration = 30 -- giây
local percentStart = 1
local percentEnd = 100

local RunService = game:GetService("RunService")
local startTime = tick()
local finished = false

local function updateProgress()
	local elapsed = tick() - startTime
	local alpha = math.clamp(elapsed / duration, 0, 1)
	local percent = math.floor(percentStart + (percentEnd - percentStart) * alpha + 0.5)
	ProgressBar.Size = UDim2.new(alpha, 0, 1, 0)
	ProgressMarker.Position = UDim2.new(alpha, -1, 0, 0)
	PercentLabel.Text = tostring(percent) .. "%"
	if alpha >= 1 then
		finished = true
	end
end

-- Cập nhật liên tục cho đến khi hết 30s
local connection
connection = RunService.RenderStepped:Connect(function()
	if not finished then
		updateProgress()
	else
		connection:Disconnect()
		-- Tùy ý: Ẩn hoặc xóa UI sau khi xong
		-- screenGui:Destroy()
	end
end)

-- (Tuỳ chọn) Cho phép chỉnh ảnh nền từ bên ngoài:
-- Bạn có thể tạo một RemoteEvent để gửi id ảnh mới từ server hoặc script khác, ví dụ:
-- game.ReplicatedStorage.ChangeAntiBanBG.OnClientEvent:Connect(function(newId)
--     Background.Image = "rbxassetid://"..tostring(newId)
-- end)
